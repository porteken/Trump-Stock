rm(list=ls())
gc()
library(tidyverse)
library(reticulate)
library(quantmod)
library(rtweet)
library(data.table)
library(lubridate)
library(e1071)
library(doParallel)
future::plan('multicore')
library(DT)
library(feasts)
library(caret)
library(fable)
library(data.table)
library(tsibble)
use_condaenv('data',required=T)
data<-fread('train.csv')
data$created_at<-with_tz(parse_date_time(data$created_at,'%m/%d/%Y H:M'),tzone='US/Central')
dim(data)
data<-data %>% filter(is_retweet==F & favorite_count>0) %>% select(-one_of('is_retweet')) %>% mutate(date=if_else(am(created_at),date(created_at),date(created_at+days(1)))) %>% select(-one_of('created_at'))
dim(data)
data$text<-gsub('http\\S+\\s*','',data$text)
data$text<-gsub("[^0-9A-Za-z///' ]",'',data$text,ignore.case = T)
datatable(head(data))
data<-data %>% mutate(importance=(retweet_count+favorite_count)/2) %>% select(text,date,importance)
data<-data %>% filter(text!='') %>% group_by(date) %>% top_n(1,importance) %>% select(-one_of('importance'))
data<-py$trains
View(data)
rm(list=ls())
gc()
library(tidyverse)
library(reticulate)
library(quantmod)
library(rtweet)
library(data.table)
library(lubridate)
library(e1071)
library(doParallel)
future::plan('multicore')
library(DT)
library(feasts)
library(caret)
library(fable)
library(data.table)
library(tsibble)
use_condaenv('data',required=T)
data<-fread('train.csv')
data$created_at<-with_tz(parse_date_time(data$created_at,'%m/%d/%Y H:M'),tzone='US/Central')
dim(data)
data<-data %>% filter(is_retweet==F & favorite_count>0) %>% select(-one_of('is_retweet')) %>% mutate(date=if_else(am(created_at),date(created_at),date(created_at+days(1)))) %>% select(-one_of('created_at'))
dim(data)
data<-fread('train.csv',quote="")
data$created_at<-with_tz(parse_date_time(data$created_at,'%m/%d/%Y H:M'),tzone='US/Central')
dim(data)
data<-data %>% filter(is_retweet==F & favorite_count>0) %>% select(-one_of('is_retweet')) %>% mutate(date=if_else(am(created_at),date(created_at),date(created_at+days(1)))) %>% select(-one_of('created_at'))
dim(data)
data<-fread('train.csv',quote="")
data$created_at<-with_tz(parse_date_time(data$created_at,'%m-%d-%Y %H:%m:%s'),tzone='US/Central')
dim(data)
data<-data %>% filter(is_retweet==F & favorite_count>0) %>% select(-one_of('is_retweet')) %>% mutate(date=if_else(am(created_at),date(created_at),date(created_at+days(1)))) %>% select(-one_of('created_at'))
dim(data)
data<-fread('train.csv',quote="")
data$created_at<-with_tz(parse_date_time(data$created_at,'%m-%d-%Y %HMS'),tzone='US/Central')
dim(data)
data<-data %>% filter(is_retweet==F & favorite_count>0) %>% select(-one_of('is_retweet')) %>% mutate(date=if_else(am(created_at),date(created_at),date(created_at+days(1)))) %>% select(-one_of('created_at'))
dim(data)
data$text<-gsub('http\\S+\\s*','',data$text)
data$text<-gsub("[^0-9A-Za-z///' ]",'',data$text,ignore.case = T)
datatable(head(data))
data<-data %>% mutate(importance=(retweet_count+favorite_count)/2) %>% select(text,date,importance)
data<-data %>% filter(text!='') %>% group_by(date) %>% top_n(1,importance) %>% select(-one_of('importance'))
data<-py$trains
py_gc <- import("gc")
py_gc$collect()
data$date<-date(data$date)
prices<-fread('SPY.csv') %>% select('Date','Close')
names(prices)<-c('date','price')
prices$date<-mdy(prices$date)
data<-right_join(data,prices,by='date')
data<-as_tsibble(data,index=date)  %>% tsibble::fill_gaps(.full = TRUE) %>% fill(price,.direction='down') %>% fill(score,.direction = 'down') %>% filter(score>0)
View(data)
View(data)
rm(list=ls())
gc()
library(tidyverse)
library(reticulate)
library(quantmod)
library(rtweet)
library(data.table)
library(lubridate)
library(e1071)
library(doParallel)
future::plan('multicore')
library(DT)
library(feasts)
library(caret)
library(fable)
library(data.table)
library(tsibble)
use_condaenv('data',required=T)
data<-fread('train.csv',quote="")
data<-data[!is.na(data$created_at)]
data$created_at<-with_tz(parse_date_time(data$created_at,'%m-%d-%Y %HMS'),tzone='US/Central')
dim(data)
data<-data %>% filter(is_retweet==F & favorite_count>0) %>% select(-one_of('is_retweet')) %>% mutate(date=if_else(am(created_at),date(created_at),date(created_at+days(1)))) %>% select(-one_of('created_at'))
dim(data)
data$text<-gsub('http\\S+\\s*','',data$text)
data$text<-gsub("[^0-9A-Za-z///' ]",'',data$text,ignore.case = T)
datatable(head(data))
data<-data %>% mutate(importance=(retweet_count+favorite_count)/2) %>% select(text,date,importance)
data<-data %>% filter(text!='') %>% group_by(date) %>% top_n(1,importance) %>% select(-one_of('importance'))
data<-py$trains
py_gc <- import("gc")
py_gc$collect()
data$date<-date(data$date)
prices<-fread('SPY.csv') %>% select('Date','Close')
names(prices)<-c('date','price')
prices$date<-mdy(prices$date)
data<-right_join(data,prices,by='date')
data<-as_tsibble(data,index=date)  %>% tsibble::fill_gaps(.full = TRUE) %>% fill(price,.direction='down') %>% fill(score,.direction = 'down') %>% filter(score>0)
View(data)
View(prices)
View(data)
View(prices)
